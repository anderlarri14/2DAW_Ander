
<!doctype html>
<html lang="en" ng-app="miAplicacion">
    <head>
        <meta charset="utf-8">
        <title>Ejemplo  Angular</title>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>
        <!-- <script src="js/npm.js" type="text/javascript"></script> -->
        <script src="js/Cargardatos_ANGULAR_1.js" type="text/javascript"></script>
        <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="css/bootstrap-theme.min.css" rel="stylesheet" type="text/css"/>
        <link href="css/cargardatos.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <div ng-controller="mainController"> 
            <!-- *********************************   ZONA MENU   *********************************************** -->
            <nav class="navbar navbar-inverse navbar-fixed-top">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">MAILA FROGA DCLI</a>
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button> 

                    </div>
                    <div class="collapse navbar-collapse" id="myNavbar">
                        <ul class="nav navbar-nav">  
                            <li> <input type="button" class="btn  navbar-btn" ng-click="cVentana('view')" value="ARTICULOS Y USUARIOS" /></li>
                            <li> <input type="button" class="btn  navbar-btn" ng-click="cVentana('add')" value="SIMULAR COMPRA" /></li>
                            <li id="idzonaAdmin"><input type="button" class="btn  navbar-btn" ng-click="cVentana('admin')" ng-show="comboUsuarios.Tipo == 'ADMIN'" value="ADMINISTRAR"/></li>
                        </ul>
                    </div> 
                </div>
            </nav>
            <!--*****************  zona listados   *************-->
            <div class="container">
                <div ng-show="zonaIkasleak" id="zonaIKASLEAK">
                    <div class="row" >
                        <div class="col-md-6 listado">
                            <h1>CONSULTA DE ARTICULOS</h1> 
                            <table id="idtableart" class="table table-striped table-bordered table-hover ">
                                <tr>
                                    <td class="peque">  Identificador </td>
                                    <td class="medio">  Nombre </td>
                                    <td class="medio">  Precio </td>
                                    <td class="medio">  Stock Minimo </td>
                                    <td class="grande">  Stock </td>     
                                </tr>
                                <tr  ng-repeat="aux in listaARTICULOS">
                                    <td class="peque">{{aux.id}}</td>
                                    <td class="medio">{{aux.nombre}}</td>
                                    <td class="medio">{{aux.Precio}}</td>
                                    <td class="medio">{{aux.StockMinimo}}</td>
                                    <td class="grande">{{aux.Stock}}</td>
                                </tr>
                            </table>

                        </div>    
                        <div class="col-md-6 listado">
                            <h1>CONSULTA DE USUARIOS</h1> 
                            <table id="idtableusu" class="table table-striped table-bordered table-hover">
                                <tr>
                                    <td class="peque">  Identificador </td>
                                    <td class="medio">  Nombre </td>
                                    <td class="medio">  Tipo  </td>
                                </tr>
                                <tr ng-repeat="aux in listaUSUARIOS">
                                    <td class="peque">{{aux.idUsuario}}</td>
                                    <td class="medio">{{aux.NombreUsuario}}</td>
                                    <td class="medio">{{aux.Tipo}}</td>
                                </tr>
                            </table>
                        </div>


                    </div>
                </div>
                <!--*****************  zona simulacion de compra   *************-->           
                <div ng-show="zonaCompra" id="simularCompra">
                    <h1>SIMULACIÓN DE COMPRAS</h1> 

                    <form class="form-inline" id="formSimular">
                        <div class="form-group formCompras">
                            <label for="usuario">USUARIO:</label>
                            <select ng-model="comboUsuarios" ng-options="aux.NombreUsuario for aux in listaUSUARIOS"  name="usuario">
                            </select>
                            <span id="spanusu" >   El usuario  es de tipo: {{comboUsuarios.Tipo}}</span>
                        </div>
                        <div class="form-group formCompras">
                            <label for="articulo">ARTICULO:</label>
                            <select ng-model="comboArticulos" ng-options="aux.nombre for aux in listaARTICULOS" name="articulo">
                            </select>
                        </div>
                        <table id="idCompra" class="table table-striped table-bordered table-hover">
                            <tr>
                                <td>id</td>
                                <td>Nombre</td>
                                <td>Precio</td>
                                <td>Stock</td>          
                            </tr>
                            <tr>
                                <td>{{comboArticulos.id}}</td>
                                <td>{{comboArticulos.nombre}}</td>
                                <td>{{comboArticulos.Precio}}</td>
                                <td>{{comboArticulos.Stock}}</td>              
                            </tr>
                        </table>
                        <div class="form-group formCompras">
                            <label for="inputcant"> CANTIDAD:</label> 
                            <input id="inputcant" type="text" value="" ng-model="cantidad" />
                            <input type="button" value="¿POSIBLE?" ng-click="posible()" />
                        </div> 
                        <div id="zonaImporte" class="form-group formCompras" >
                            TOTAL IMPORTE: {{cantidad}}
                        </div>
                        <div class="form-group formCompras">
                            <button type="submit" id="submitCompras" class="btn btn-default ">Submit</button>
                        </div>
                    </form> 

                </div>

                <!-- **********************zona administrador ***********     *********************************************** -->
                <div ng-show="zonaAdmin" id="zonaADMIN">
                    <div >
                        <div class="listado">
                            <h1>CONSULTA DE ARTICULOS</h1> 
                            <table id="idtableart" class="table table-striped table-bordered table-hover ">
                                <tr> 
                                    <td class="peque">  Identificador </td>
                                    <td class="medio">  Nombre </td>
                                    <td class="medio">  Precio </td>
                                    <td class="medio">  Stock Minimo </td>
                                    <td class="peque">  Stock </td>  
                                    <td class="peque">  Borrar </td>  
                                    <td class="peque">  Editar </td>  
                                </tr>
                                <!-- Una lista con index para poder acceder a cada elemento -->
                                <tr ng-repeat="aux in listaARTICULOS track by $index" >
                                    <td class="peque">{{aux.id}}</td>
                                    <td class="medio">{{aux.nombre}}</td>
                                    <td class="medio"><input type="text" ng-model="aux.Precio"></td>
                                    <td class="medio">{{aux.StockMinimo}}</td>
                                    <td class="grande"><input type="text" ng-model="aux.Stock" ></td>
                                    <td class="grande"> <img src="img/images.jpg" class="txiki" style="cursor: pointer;" ng-click="eliminar($index)" />   </td>
                                    <td class="grande"><img src="img/modif.png" class="txiki" style="cursor: pointer;" ng-click="editar()" />   </td>
                                </tr>
                            </table>

                        </div>    

                    </div>
                </div>


            </div>
        </div>
    </body>
</html>